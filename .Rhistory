"se setkáme v jiném projektu někdy v budoucnu. \n\n\nS úctou,\nFrantišek Kalvas")) %>%
filter(dnes)
View(dopisy3)
## Konstrukce zprávy
library(dplyr)
library(readr)
library(readxl)
dopisy3 = read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano) %>%
mutate(dnes = as.Date(kdyPoslano) == Sys.Date(),
dopis =
paste0(
"Vážená účastnice, vážený účastníku turnaje PGG, \n\n\n",
"dnes (", kdyPoslano, ") jsem Vám odeslal odměnu ", castka, " Kč na Váš účet číslo ",
ucet, ". Ještě jednou -- a naposled -- Vám děkuji za účast v našem projektu a snad ",
"se setkáme v jiném projektu někdy v budoucnu. \n\n\nS úctou,\nFrantišek Kalvas")) %>%
filter(dnes)
dopisy3 = read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano) %>%
mutate(dnes = as.Date(kdyPoslano) == Sys.Date(),
dopis =
paste0(
"Vážená účastnice, vážený účastníku turnaje PGG, \n\n\n",
"dnes (", kdyPoslano, ") jsem Vám odeslal odměnu ", castka, " Kč na Váš účet číslo ",
ucet, ". Ještě jednou -- a naposled -- Vám děkuji za účast v našem projektu a snad ",
"se setkáme v jiném projektu někdy v budoucnu. \n\n\nS úctou,\nFrantišek Kalvas")) %>%
filter(dnes)
dopisy3 = read_xlsx("prehled.xlsx")
dopisy3 = read_xlsx("prehled.xlsx")
dopisy3 = read_xlsx("prehled.xls")
dopisy3 = read_csv("prehled.csv")
View(dopisy3)
dopisy3 = read_csv2("prehled.csv")
dopisy3 = read_csv2("prehled.csv") %>% select(email, ucet, castka, kdyPoslano) %>%
mutate(dnes = as.Date(kdyPoslano) == Sys.Date(),
dopis =
paste0(
"Vážená účastnice, vážený účastníku turnaje PGG, \n\n\n",
"dnes (", kdyPoslano, ") jsem Vám odeslal odměnu ", castka, " Kč na Váš účet číslo ",
ucet, ". Ještě jednou -- a naposled -- Vám děkuji za účast v našem projektu a snad ",
"se setkáme v jiném projektu někdy v budoucnu. \n\n\nS úctou,\nFrantišek Kalvas")) %>%
filter(dnes)
View(dopisy3)
dopisy3 = read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano) %>%
#dopisy3 = read_csv2("prehled.csv") %>% select(email, ucet, castka, kdyPoslano) %>%
mutate(dnes = as.Date(kdyPoslano) == Sys.Date(),
dopis =
paste0(
"Vážená účastnice, vážený účastníku turnaje PGG, \n\n\n",
"dnes (", kdyPoslano, ") jsem Vám odeslal odměnu ", castka, " Kč na Váš účet číslo ",
ucet, ". Ještě jednou -- a naposled -- Vám děkuji za účast v našem projektu a snad ",
"se setkáme v jiném projektu někdy v budoucnu. \n\n\nS úctou,\nFrantišek Kalvas")) %>%
filter(dnes)
dopisy3 = read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano) %>%
#dopisy3 = read_csv2("prehled.csv") %>% select(email, ucet, castka, kdyPoslano) %>%
mutate(dnes = as.Date(kdyPoslano) == Sys.Date(),
dopis =
paste0(
"Vážená účastnice, vážený účastníku turnaje PGG, \n\n\n",
"dnes (", kdyPoslano, ") jsem Vám odeslal odměnu ", castka, " Kč na Váš účet číslo ",
ucet, ". Ještě jednou -- a naposled -- Vám děkuji za účast v našem projektu a snad ",
"se setkáme v jiném projektu někdy v budoucnu. \n\n\nS úctou,\nFrantišek Kalvas")) %>%
filter(dnes)
dopisy3 = read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano) %>%
#dopisy3 = read_csv2("prehled.csv") %>% select(email, ucet, castka, kdyPoslano) %>%
mutate(dnes = as.Date(kdyPoslano) == Sys.Date(),
dopis =
paste0(
"Vážená účastnice, vážený účastníku turnaje PGG, \n\n\n",
"dnes (", kdyPoslano, ") jsem Vám odeslal odměnu ", castka, " Kč na Váš účet číslo ",
ucet, ". Ještě jednou -- a naposled -- Vám děkuji za účast v našem projektu a snad ",
"se setkáme v jiném projektu někdy v budoucnu. \n\n\nS úctou,\nFrantišek Kalvas")) %>%
filter(dnes)
library(readxl)
dopisy3 = readxl::read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano) %>%
#dopisy3 = read_csv2("prehled.csv") %>% select(email, ucet, castka, kdyPoslano) %>%
mutate(dnes = as.Date(kdyPoslano) == Sys.Date(),
dopis =
paste0(
"Vážená účastnice, vážený účastníku turnaje PGG, \n\n\n",
"dnes (", kdyPoslano, ") jsem Vám odeslal odměnu ", castka, " Kč na Váš účet číslo ",
ucet, ". Ještě jednou -- a naposled -- Vám děkuji za účast v našem projektu a snad ",
"se setkáme v jiném projektu někdy v budoucnu. \n\n\nS úctou,\nFrantišek Kalvas")) %>%
filter(dnes)
readxl::read_xlsx("prehled.xlsx")
readxl::read_excel("prehled.xlsx")
#dopisy3 = readxl::read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano) %>%
dopisy3 = read_csv2("prehled.csv") %>% select(email, ucet, castka, kdyPoslano) %>%
mutate(dnes = as.Date(kdyPoslano) == Sys.Date(),
dopis =
paste0(
"Vážená účastnice, vážený účastníku turnaje PGG, \n\n\n",
"dnes (", kdyPoslano, ") jsem Vám odeslal odměnu ", castka, " Kč na Váš účet číslo ",
ucet, ". Ještě jednou -- a naposled -- Vám děkuji za účast v našem projektu a snad ",
"se setkáme v jiném projektu někdy v budoucnu. \n\n\nS úctou,\nFrantišek Kalvas")) %>%
filter(dnes)
## Konstrukce zprávy
library(dplyr)
library(readr)
library(readxl)
#dopisy3 = readxl::read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano) %>%
dopisy3 = read_csv2("prehled.csv") %>% select(email, ucet, castka, kdyPoslano) %>%
mutate(dnes = as.Date(kdyPoslano) == Sys.Date(),
dopis =
paste0(
"Vážená účastnice, vážený účastníku turnaje PGG, \n\n\n",
"dnes (", kdyPoslano, ") jsem Vám odeslal odměnu ", castka, " Kč na Váš účet číslo ",
ucet, ". Ještě jednou -- a naposled -- Vám děkuji za účast v našem projektu a snad ",
"se setkáme v jiném projektu někdy v budoucnu. \n\n\nS úctou,\nFrantišek Kalvas")) %>%
filter(dnes)
View(dopisy3)
## Samotné odeslání
library(emayili)
library(dplyr)
library(magrittr)
for (d in 1:nrow(dopisy3)) {
email <- envelope() %>%
from("kalvas@kss.zcu.cz") %>%
to(dopisy3$email[d]) %>%
subject(qp_encode("Peníze z turnaje PGG Vám byly dnes odeslány")) %>%
text(qp_encode(dopisy3$dopis[d]))
# print(email, details = T)
smtp <- server(host = "smtp.zcu.cz",
port = 465,
username = "login",
password = "pass")
smtp(email, verbose = TRUE)
}
for (d in 1:nrow(dopisy3)) {
email <- envelope() %>%
from("kalvas@kss.zcu.cz") %>%
to(dopisy3$email[d]) %>%
subject(qp_encode("Peníze z turnaje PGG Vám byly dnes odeslány")) %>%
text(qp_encode(dopisy3$dopis[d]))
# print(email, details = T)
smtp <- server(host = "smtp.zcu.cz",
port = 465,
username = "kalvas",
password = "Dingo933")
smtp(email, verbose = TRUE)
}
dopisy3 = readxl::read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano) %>%
# dopisy3 = read_csv2("prehled.csv") %>% select(email, ucet, castka, kdyPoslano) %>%
mutate(dnes = as.Date(kdyPoslano) == Sys.Date(),
dopis =
paste0(
"Vážená účastnice, vážený účastníku turnaje PGG, \n\n\n",
"dnes (", kdyPoslano, ") jsem Vám odeslal odměnu ", castka, " Kč na Váš účet číslo ",
ucet, ". Ještě jednou -- a naposled -- Vám děkuji za účast v našem projektu a snad ",
"se setkáme v jiném projektu někdy v budoucnu. \n\n\nS úctou,\nFrantišek Kalvas")) %>%
filter(dnes)
## Konstrukce zprávy
library(dplyr)
library(readr)
library(readxl)
dopisy3 = readxl::read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano) %>%
# dopisy3 = read_csv2("prehled.csv") %>% select(email, ucet, castka, kdyPoslano) %>%
mutate(dnes = as.Date(kdyPoslano) == Sys.Date(),
dopis =
paste0(
"Vážená účastnice, vážený účastníku turnaje PGG, \n\n\n",
"dnes (", kdyPoslano, ") jsem Vám odeslal odměnu ", castka, " Kč na Váš účet číslo ",
ucet, ". Ještě jednou -- a naposled -- Vám děkuji za účast v našem projektu a snad ",
"se setkáme v jiném projektu někdy v budoucnu. \n\n\nS úctou,\nFrantišek Kalvas")) %>%
filter(dnes)
dopisy3 = readxl::read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano) %>%
# dopisy3 = read_csv2("prehled.csv") %>% select(email, ucet, castka, kdyPoslano) %>%
mutate(dnes = as.Date(kdyPoslano) == Sys.Date(),
dopis =
paste0(
"Vážená účastnice, vážený účastníku turnaje PGG, \n\n\n",
"dnes (", kdyPoslano, ") jsem Vám odeslal odměnu ", castka, " Kč na Váš účet číslo ",
ucet, ". Ještě jednou -- a naposled -- Vám děkuji za účast v našem projektu a snad ",
"se setkáme v jiném projektu někdy v budoucnu. \n\n\nS úctou,\nFrantišek Kalvas")) %>%
filter(dnes)
dopisy3 = readxl::read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano)
View(dopisy3)
dopisy3 = readxl::read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano) %>%
# dopisy3 = read_csv2("prehled.csv") %>% select(email, ucet, castka, kdyPoslano) %>%
filter(kdyPoslano != "---") %>%
mutate(dnes = as.Date(kdyPoslano) == Sys.Date(),
dopis =
paste0(
"Vážená účastnice, vážený účastníku turnaje PGG, \n\n\n",
"dnes (", kdyPoslano, ") jsem Vám odeslal odměnu ", castka, " Kč na Váš účet číslo ",
ucet, ". Ještě jednou -- a naposled -- Vám děkuji za účast v našem projektu a snad ",
"se setkáme v jiném projektu někdy v budoucnu. \n\n\nS úctou,\nFrantišek Kalvas")) %>%
filter(dnes)
View(dopisy3)
## Smazání paměti
rm(list = ls())
## Package
library(dplyr)
library(readr)
library(readxl)
library(writexl)
## Načtení dat
load("vsechnaCistaData.RData")
## Konstrukce zprávy
library(dplyr)
library(readr)
library(readxl)
dopisy3 = readxl::read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano) %>%
# dopisy3 = read_csv2("prehled.csv") %>% select(email, ucet, castka, kdyPoslano) %>%
filter(kdyPoslano != "---") %>%
mutate(dnes = as.Date(kdyPoslano) == Sys.Date(),
dopis =
paste0(
"Vážená účastnice, vážený účastníku turnaje PGG, \n\n\n",
"dnes (", kdyPoslano, ") jsem Vám odeslal odměnu ", castka, " Kč na Váš účet číslo ",
ucet, ". Ještě jednou -- a naposled -- Vám děkuji za účast v našem projektu a snad ",
"se setkáme v jiném projektu někdy v budoucnu. \n\n\nS úctou,\nFrantišek Kalvas")) %>%
filter(dnes)
View(dopisy3)
## Samotné odeslání
library(emayili)
library(dplyr)
library(magrittr)
for (d in 1:nrow(dopisy3)) {
email <- envelope() %>%
from("kalvas@kss.zcu.cz") %>%
to(dopisy3$email[d]) %>%
subject(qp_encode("Peníze z turnaje PGG Vám byly dnes odeslány")) %>%
text(qp_encode(dopisy3$dopis[d]))
# print(email, details = T)
smtp <- server(host = "smtp.zcu.cz",
port = 465,
username = "login",
password = "pass")
smtp(email, verbose = TRUE)
}
for (d in 1:nrow(dopisy3)) {
email <- envelope() %>%
from("kalvas@kss.zcu.cz") %>%
to(dopisy3$email[d]) %>%
subject(qp_encode("Peníze z turnaje PGG Vám byly dnes odeslány")) %>%
text(qp_encode(dopisy3$dopis[d]))
# print(email, details = T)
smtp <- server(host = "smtp.zcu.cz",
port = 465,
username = "kalvas",
password = "Dingo933")
smtp(email, verbose = TRUE)
}
dopisy4= readxl::read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano)
library(dplyr)
library(readr)
library(readxl)
dopisy4= readxl::read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano)
View(dopisy4)
dopisy4= readxl::read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano) %>%
# dopisy4 = read_csv2("prehled.csv") %>% select(email, ucet, castka, kdyPoslano) %>%
filter(ucet == ".", castka > 0)
View(PGG)
dopisy4= readxl::read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano) %>%
# dopisy4 = read_csv2("prehled.csv") %>% select(email, ucet, castka, kdyPoslano) %>%
filter(ucet == ".", castka > 0) %>%
mutate(dopis =
paste0(
"Vážená účastnice, vážený účastníku turnaje PGG, \n\n\n",
"máme pro Vás připravenou odměnu ", castka, " Kč, ale stále neevidujeme číslo Vašeho účtu. ",
"Pokud máte o odměnu zájem, zašlete nám prosím číslo účtu. \n\n\nS úctou,\nFrantišek Kalvas\n\n",
"P.S. Turnaj PGG byla kooperativní hra pořádaná Laboratoří experimentální sociologie ZČU, ",
"které jste se účastnil/a spolu se třemi přáteli nebo známými mezi 21. dubnem a 2. květnem 2021."))
View(dopisy4)
dopisy4= readxl::read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano) %>%
# dopisy4 = read_csv2("prehled.csv") %>% select(email, ucet, castka, kdyPoslano) %>%
filter(ucet == ".", castka > 0) %>%
mutate(dopis =
paste0(
"Vážená účastnice, vážený účastníku turnaje PGG, \n\n\n",
"mezi 21. dubnem a 2. květnem 2021 proběhl turnaj PGG, což byla kooperativní hra ",
"pořádaná Laboratoří experimentální sociologie ZČU, ",
"které jste se účastnil/a spolu s dalšími třemi přáteli nebo známými. ",
"Máme pro Vás za Vaší účast připravenou odměnu ", castka,
" Kč, ale stále neevidujeme číslo Vašeho účtu. ",
"Pokud máte o odměnu zájem, zašlete nám prosím na tento e-mail číslo účtu.",
"\n\n\nS úctou,\nFrantišek Kalvas"))
## Konstrukce zprávy
library(dplyr)
library(readr)
library(readxl)
dopisy4= readxl::read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano) %>%
# dopisy4 = read_csv2("prehled.csv") %>% select(email, ucet, castka, kdyPoslano) %>%
filter(ucet == ".", castka > 0) %>%
mutate(dopis =
paste0(
"Vážená účastnice, vážený účastníku turnaje PGG, \n\n\n",
"mezi 21. dubnem a 2. květnem 2021 proběhl turnaj PGG, což byla kooperativní hra ",
"pořádaná Laboratoří experimentální sociologie ZČU, ",
"které jste se účastnil/a spolu s dalšími třemi přáteli nebo známými. ",
"Máme pro Vás za Vaší účast připravenou odměnu ", castka,
" Kč, ale stále neevidujeme číslo Vašeho účtu. ",
"Pokud máte o odměnu zájem, zašlete nám prosím na tento e-mail číslo účtu.",
"\n\n\nS úctou,\nFrantišek Kalvas"))
for (d in 1:nrow(dopisy3)) {
email <- envelope() %>%
from("kalvas@kss.zcu.cz") %>%
to(dopisy3$email[d]) %>%
subject(qp_encode("Peníze z turnaje PGG Vám byly dnes odeslány")) %>%
text(qp_encode(dopisy3$dopis[d]))
# print(email, details = T)
smtp <- server(host = "smtp.zcu.cz",
port = 465,
username = "kalvas",
password = "Dingo933")
smtp(email, verbose = TRUE)
}
## Samotné odeslání
library(emayili)
library(dplyr)
library(magrittr)
for (d in 1:nrow(dopisy3)) {
email <- envelope() %>%
from("kalvas@kss.zcu.cz") %>%
to(dopisy3$email[d]) %>%
subject(qp_encode("Peníze z turnaje PGG Vám byly dnes odeslány")) %>%
text(qp_encode(dopisy3$dopis[d]))
# print(email, details = T)
smtp <- server(host = "smtp.zcu.cz",
port = 465,
username = "kalvas",
password = "Dingo933")
smtp(email, verbose = TRUE)
}
## Samotné odeslání
library(emayili)
library(dplyr)
library(magrittr)
View(dopisy3)
dopisy3 = readxl::read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano) %>%
# dopisy3 = read_csv2("prehled.csv") %>% select(email, ucet, castka, kdyPoslano) %>%
filter(kdyPoslano != "---") %>%
mutate(dnes = as.Date(kdyPoslano) == Sys.Date(),
dopis =
paste0(
"Vážená účastnice, vážený účastníku turnaje PGG, \n\n\n",
"dnes (", kdyPoslano, ") jsem Vám odeslal odměnu ", castka, " Kč na Váš účet číslo ",
ucet, ". Ještě jednou -- a naposled -- Vám děkuji za účast v našem projektu a snad ",
"se setkáme v jiném projektu někdy v budoucnu. \n\n\nS úctou,\nFrantišek Kalvas")) %>%
filter(dnes)
## Konstrukce zprávy
library(dplyr)
library(readr)
library(readxl)
dopisy4= readxl::read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano) %>%
# dopisy4 = read_csv2("prehled.csv") %>% select(email, ucet, castka, kdyPoslano) %>%
filter(ucet == ".", castka > 0) %>%
mutate(dopis =
paste0(
"Vážená účastnice, vážený účastníku turnaje PGG, \n\n\n",
"mezi 21. dubnem a 2. květnem 2021 proběhl turnaj PGG, což byla kooperativní hra ",
"pořádaná Laboratoří experimentální sociologie ZČU, ",
"které jste se účastnil/a spolu s dalšími třemi přáteli nebo známými. ",
"Máme pro Vás za Vaší účast připravenou odměnu ", castka,
" Kč, ale stále neevidujeme číslo Vašeho účtu. ",
"Pokud máte o odměnu zájem, zašlete nám prosím na tento e-mail číslo účtu.",
"\n\n\nS úctou,\nFrantišek Kalvas"))
## Samotné odeslání
library(emayili)
library(dplyr)
library(magrittr)
for (d in 1:nrow(dopisy4)) {
email <- envelope() %>%
from("kalvas@kss.zcu.cz") %>%
to(dopisy4$email[d]) %>%
subject(qp_encode("Turnaj PGG: upomínka")) %>%
text(qp_encode(dopisy4$dopis[d]))
# print(email, details = T)
smtp <- server(host = "smtp.zcu.cz",
port = 465,
username = "kalvas",
password = "Dingo933")
smtp(email, verbose = TRUE)
}
## Konstrukce zprávy
library(dplyr)
library(readr)
library(readxl)
dopisy3 = readxl::read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano) %>%
# dopisy3 = read_csv2("prehled.csv") %>% select(email, ucet, castka, kdyPoslano) %>%
filter(kdyPoslano != "---") %>%
mutate(dnes = as.Date(kdyPoslano) == Sys.Date(),
dopis =
paste0(
"Vážená účastnice, vážený účastníku turnaje PGG, \n\n\n",
"dnes (", kdyPoslano, ") jsem Vám odeslal odměnu ", castka, " Kč na Váš účet číslo ",
ucet, ". Ještě jednou -- a naposled -- Vám děkuji za účast v našem projektu a snad ",
"se setkáme v jiném projektu někdy v budoucnu. \n\n\nS úctou,\nFrantišek Kalvas")) %>%
filter(dnes)
View(dopisy3)
## Samotné odeslání
library(emayili)
library(dplyr)
library(magrittr)
for (d in 1:nrow(dopisy3)) {
email <- envelope() %>%
from("kalvas@kss.zcu.cz") %>%
to(dopisy3$email[d]) %>%
subject(qp_encode("Peníze z turnaje PGG Vám byly dnes odeslány")) %>%
text(qp_encode(dopisy3$dopis[d]))
# print(email, details = T)
smtp <- server(host = "smtp.zcu.cz",
port = 465,
username = "kalvas",
password = "Dingo933")
smtp(email, verbose = TRUE)
}
## Konstrukce zprávy
library(dplyr)
library(readr)
library(readxl)
dopisy4= readxl::read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano) %>%
# dopisy4 = read_csv2("prehled.csv") %>% select(email, ucet, castka, kdyPoslano) %>%
filter(ucet == ".", castka > 0) %>%
mutate(dopis =
paste0(
"Vážená účastnice, vážený účastníku turnaje PGG, \n\n\n",
"mezi 21. dubnem a 2. květnem 2021 proběhl turnaj PGG, což byla kooperativní hra ",
"pořádaná Laboratoří experimentální sociologie ZČU, ",
"které jste se účastnil/a spolu s dalšími třemi přáteli nebo známými. ",
"Máme pro Vás za Vaší účast připravenou odměnu ", castka,
" Kč, ale stále neevidujeme číslo Vašeho účtu. ",
"Pokud máte o odměnu zájem, zašlete nám prosím na tento e-mail číslo účtu.",
"\n\n\nS úctou,\nFrantišek Kalvas"))
View(dopisy4)
## Samotné odeslání
library(emayili)
library(dplyr)
library(magrittr)
for (d in 1:nrow(dopisy4)) {
email <- envelope() %>%
from("kalvas@kss.zcu.cz") %>%
to(dopisy4$email[d]) %>%
subject(qp_encode("Turnaj PGG: 2. upomínka")) %>%
text(qp_encode(dopisy4$dopis[d]))
# print(email, details = T)
smtp <- server(host = "smtp.zcu.cz",
port = 465,
username = "kalvas",
password = "Dingo933")
smtp(email, verbose = TRUE)
}
## Konstrukce zprávy
library(dplyr)
library(readr)
library(readxl)
dopisy3 = readxl::read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano) %>%
# dopisy3 = read_csv2("prehled.csv") %>% select(email, ucet, castka, kdyPoslano) %>%
filter(kdyPoslano != "---") %>%
mutate(dnes = as.Date(kdyPoslano) == Sys.Date(),
dopis =
paste0(
"Vážená účastnice, vážený účastníku turnaje PGG, \n\n\n",
"dnes (", kdyPoslano, ") jsem Vám odeslal odměnu ", castka, " Kč na Váš účet číslo ",
ucet, ". Ještě jednou -- a naposled -- Vám děkuji za účast v našem projektu a snad ",
"se setkáme v jiném projektu někdy v budoucnu. \n\n\nS úctou,\nFrantišek Kalvas")) %>%
filter(dnes)
dopisy3 = readxl::read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano) %>%
# dopisy3 = read_csv2("prehled.csv") %>% select(email, ucet, castka, kdyPoslano) %>%
filter(kdyPoslano != "---") %>%
mutate(dnes = as.Date(kdyPoslano) == Sys.Date(),
dopis =
paste0(
"Vážená účastnice, vážený účastníku turnaje PGG, \n\n\n",
"dnes (", kdyPoslano, ") jsem Vám odeslal odměnu ", castka, " Kč na Váš účet číslo ",
ucet, ". Ještě jednou -- a naposled -- Vám děkuji za účast v našem projektu a snad ",
"se setkáme v jiném projektu někdy v budoucnu. \n\n\nS úctou,\nFrantišek Kalvas")) %>%
filter(dnes)
View(dopisy3)
## Samotné odeslání
library(emayili)
library(dplyr)
library(magrittr)
for (d in 1:nrow(dopisy3)) {
email <- envelope() %>%
from("kalvas@kss.zcu.cz") %>%
to(dopisy3$email[d]) %>%
subject(qp_encode("Peníze z turnaje PGG Vám byly dnes odeslány")) %>%
text(qp_encode(dopisy3$dopis[d]))
# print(email, details = T)
smtp <- server(host = "smtp.zcu.cz",
port = 465,
username = "login",
password = "pass")
smtp(email, verbose = TRUE)
}
for (d in 1:nrow(dopisy3)) {
email <- envelope() %>%
from("kalvas@kss.zcu.cz") %>%
to(dopisy3$email[d]) %>%
subject(qp_encode("Peníze z turnaje PGG Vám byly dnes odeslány")) %>%
text(qp_encode(dopisy3$dopis[d]))
# print(email, details = T)
smtp <- server(host = "smtp.zcu.cz",
port = 465,
username = "kalvas",
password = "Dingo933")
smtp(email, verbose = TRUE)
}
dopisy4= readxl::read_xlsx("prehled.xlsx") %>% select(email, ucet, castka, kdyPoslano) %>%
# dopisy4 = read_csv2("prehled.csv") %>% select(email, ucet, castka, kdyPoslano) %>%
filter(ucet == ".", castka > 0) %>%
mutate(dopis =
paste0(
"Vážená účastnice, vážený účastníku turnaje PGG, \n\n\n",
"mezi 21. dubnem a 2. květnem 2021 proběhl turnaj PGG, což byla kooperativní hra ",
"pořádaná Laboratoří experimentální sociologie ZČU, ",
"které jste se účastnil/a spolu s dalšími třemi přáteli nebo známými. ",
"Máme pro Vás za Vaší účast připravenou odměnu ", castka,
" Kč, ale stále neevidujeme číslo Vašeho účtu. ",
"Pokud máte o odměnu zájem, zašlete nám prosím na tento e-mail číslo účtu.",
"\n\n\nS úctou,\nFrantišek Kalvas"))
View(dopisy4)
