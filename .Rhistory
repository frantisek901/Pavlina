raw = rjson::fromJSON(file = 'm87.json')
## Druhý pokus:
str(raw, max.level = 3)
list.select(raw, time, session) %>%  # Vytáhne z RAW příslušné proměnné
list.stack()  # Udělá dataframe
raw[[22]] %>% bind_rows()
raw[[92]] %>% bind_rows()
raw[[95]] %>% bind_rows()
raw[[94]] %>% bind_rows()
raw[[96]] %>% bind_rows()
raw[[97]] %>% bind_rows()
## Hlavička
rm(list = ls())
library(rjson)
library(rlist)
library(dplyr)
## První pokus:
raw = fromJSON(file = 'm87.json')
list.select(raw, time, session) %>%  # Vytáhne z RAW příslušné proměnné
list.stack()  # Udělá dataframe
raw[[97]] %>% bind_rows()
library(readr)
read.csv('q1.csv')
read.csv('q2.csv')
read.csv('q2.csv', encoding = utf-8)
read.csv('q2.csv', encoding = "UTF-8")
read.csv('q1.csv', encoding = "UTF-8")
read.csv('q1.csv', encoding = "UTF-8")
raw[[57]] %>% bind_rows()
unzip("pgg-data_2021-04-22T04_56_33.753Z.zip", list = T)
files = unzip("pgg-data_2021-04-22T04_56_33.753Z.zip", list = T)
class(files)
## Třetí pokus -- načíst data ze *.zip archivu:
files = unzip("pgg-data_2021-04-22T04_56_33.753Z.zip", list = T) %>% filter(Length > 0)
## Hlavička
rm(list = ls())
library(rjson)
library(rlist)
library(dplyr)
library(readr)
## Třetí pokus -- načíst data ze *.zip archivu:
files = unzip("pgg-data_2021-04-22T04_56_33.753Z.zip", list = T) %>% filter(Length > 0)
files
library(stringr)
## Třetí pokus -- načíst data ze *.zip archivu:
archive = "pgg-data_2021-04-22T04_56_33.753Z.zip"
files = unzip(archive, list = T) %>%
files = unzip(archive, list = T) %>%
filter(Length > 0)
## Třetí pokus -- načíst data ze *.zip archivu:
archive = "pgg-data_2021-04-22T04_56_33.753Z.zip"
files = unzip(archive, list = T) %>%
filter(Length > 0)
df = unz(archive, files[7,1])
df = unz(archive, files$Name[7])
df
df = unz(archive, files$Name[7]) %>% read_csv()
df
df = unz(archive, files$Name[6]) %>% read_csv()
df
dfQ1 = unz(archive, files$Name[6]) %>% read_csv()
dfQ2 = unz(archive, files$Name[7]) %>% read_csv()
dfQ1
dfQ1
dfQ2
files
emaily = unz(archive, files$Name[3]) %>% read_csv()
emaily
dfPGG = unz(archive, files$Name[5]) %>% read_csv()
dfPGG
bonus = unz(archive, files$Name[2]) %>% read_csv()
bonus
## Stažení dat:
GET('http://207.154.245.100/pgg/monitor/data/*',  ## Adresa naší hry
write_disk('aktualniData.zip', overwrite = TRUE))
## Package
library(dplyr)
library(readr)
library(stringr)
library(rvest)
## Stažení dat:
GET('http://207.154.245.100/pgg/monitor/data/*',  ## Adresa naší hry
write_disk('aktualniData.zip', overwrite = TRUE))
library(httr)
## Stažení dat:
GET('http://207.154.245.100/pgg/monitor/data/*',  ## Adresa naší hry
write_disk('aktualniData.zip', overwrite = TRUE))
## Načtení dat ze *.zip archivu:
archive = "aktualniData.zip"
files = unzip(archive, list = T) %>%
filter(Length > 0)
bonus = unz(archive, files$Name[2]) %>% read_csv()
bonus
emaily = unz(archive, files$Name[3]) %>% read_csv()
emaily
dfPGG = unz(archive, files$Name[5]) %>% read_csv()
dfPGG
dfQ1 = unz(archive, files$Name[6]) %>% read_csv()
dfQ1
dfQ2 = unz(archive, files$Name[7]) %>% read_csv()
dfQ2
GET('http://207.154.245.100/pgg/monitor/data/*',  ## Adresa naší hry
write_disk('aktualniData.zip', overwrite = TRUE))
archive = "aktualniData.zip"
files = unzip(archive, list = T) %>%
filter(Length > 0)
files
bonus = unz(archive, files$Name[2]) %>% read_csv()
bonus
emaily = unz(archive, files$Name[3]) %>% read_csv()
emaily
dfPGG = unz(archive, files$Name[5]) %>% read_csv()
dfPGG
dfQ1 = unz(archive, files$Name[6]) %>% read_csv()
dfQ1
dfQ2 = unz(archive, files$Name[7]) %>% read_csv()
dfQ2
bonus
## Hlavička
rm(list = ls())
## Package
library(dplyr)
library(readr)
library(stringr)
library(httr)
GET('http://207.154.245.100/pgg/monitor/data/*',  ## Adresa naší hry
write_disk('aktualniData.zip', overwrite = TRUE))
archive = "aktualniData.zip"
files = unzip(archive, list = T) %>%
filter(Length > 0)
files
bonus = unz(archive, files$Name[2]) %>% read_csv()
bonus
emaily = unz(archive, files$Name[3]) %>% read_csv()
emaily
dfPGG = unz(archive, files$Name[5]) %>% read_csv()
dfPGG
dfQ1 = unz(archive, files$Name[6]) %>% read_csv()
dfQ1
dfQ2 = unz(archive, files$Name[7]) %>% read_csv()
dfQ2
bonus = unz(archive, files$Name[2]) %>% read_csv() %>% rename(id = 'player')
bonus = unz(archive, files$Name[2]) %>% read_csv() %>% rename(player = id)
bonus
emaily = unz(archive, files$Name[3]) %>% read_csv()
emaily
dfPGG = unz(archive, files$Name[5]) %>% read_csv()
dfPGG
dfQ1 = unz(archive, files$Name[6]) %>% read_csv()
dfQ1
dfQ2 = unz(archive, files$Name[7]) %>% read_csv()
dfQ2
vysledek = left_join(bonus, emaily)
vysledek
vysledek = left_join(bonus, emaily) %>% left_join(dfQ1)
vysledek
emaily
emaily = unz(archive, files$Name[3]) %>% read_csv() %>% rename(email = value)
emaily
dfPGG = unz(archive, files$Name[5]) %>% read_csv()
dfPGG
dfQ1 = unz(archive, files$Name[6]) %>% read_csv()
dfQ1
dfQ2 = unz(archive, files$Name[7]) %>% read_csv()
dfQ2
vysledek = left_join(bonus, emaily) %>% left_join(dfQ1)
vysledek
vysledek = left_join(bonus, emaily) %>% left_join(dfQ1) %>% left_join(dfQ2)
vysledek
vysledek = left_join(bonus, emaily) %>% left_join(dfQ1) %>% left_join(dfQ2, by = c("player", "session"))
vysledek
View(vysledek)
celkova = left_join(dfPGG, vysledek, by = c("player", "session"))
celkova
bonus = unz(archive, files$Name[2]) %>% read_csv() %>% rename(player = id, celkem = bonus)
bonus
emaily = unz(archive, files$Name[3]) %>% read_csv() %>% rename(email = value)
emaily
dfPGG = unz(archive, files$Name[5]) %>% read_csv()
dfPGG
dfQ1 = unz(archive, files$Name[6]) %>% read_csv()
dfQ1
dfQ2 = unz(archive, files$Name[7]) %>% read_csv()
dfQ2
vysledek = left_join(bonus, emaily) %>% left_join(dfQ1) %>% left_join(dfQ2, by = c("player", "session"))
vysledek
celkova = left_join(dfPGG, vysledek, by = c("player", "session"))
celkova
knitr::opts_chunk$set(echo = TRUE)
library(readxl)
library(lubridate)
library(tibble)
library(forcats)
library(haven)
library(tidyverse)
library(sjmisc)
library(dplyr)
#pro jistotu jsem si načetla různé knihovny
#spotreba_csda <- read_sav("C:/Users/micha/AppData/Local/Temp/CSDA00057_F1_WIvhXp")
moje_data <- factor(spotreba_csda)
spotreba_csda <- read_sav("C:/Users/micha/AppData/Local/Temp/CSDA00057_F1_WIvhXp")
library(httr)
archive = "CSDA00057 (3).zip"
files = unzip(archive, list = T) %>%
filter(Length > 0)
files
library(readxl)
library(lubridate)
library(tibble)
library(forcats)
library(haven)
library(tidyverse)
library(sjmisc)
library(dplyr)
library(httr)
#pro jistotu jsem si načetla různé knihovny
archive = "CSDA00057 (3).zip"
files = unzip(archive, list = T) %>%
filter(Length > 0)
files
# spotreba_csda <- read_sav("C:/Users/micha/AppData/Local/Temp/CSDA00057_F1_WIvhXp")
# moje_data <- factor(spotreba_csda)
#
# is.factor(moje_data)
view(moje_data)
library(readxl)
library(lubridate)
library(tibble)
library(forcats)
library(haven)
library(tidyverse)
library(sjmisc)
library(dplyr)
library(httr)
#pro jistotu jsem si načetla různé knihovny
archive = "CSDA00057 (3).zip"
files = unzip(archive, list = T) %>%
filter(Length > 0)
print(files)
# spotreba_csda <- read_sav("C:/Users/micha/AppData/Local/Temp/CSDA00057_F1_WIvhXp")
# moje_data <- factor(spotreba_csda)
#
# is.factor(moje_data)
view(moje_data)
print(files)
View(files)
print(files)
print(files)
View(files)
moje_data = unz(archive, files$Name) %>% read_csv() %>% rename(player = id, celkem = bonus)
moje_data = unz(archive, files$Name[1]) %>% read_csv() %>% rename(player = id, celkem = bonus)
moje_data = unz(archive, files$Name[1]) %>% read_sav()
View(moje_data)
## Najdeme názvy souborů
archive = "CSDA00057 (3).zip"
files = unzip(archive, list = T) %>% filter(Length > 0)
View(files)
View(moje_data)
view(moje_data)
df = unz()
view(moje_data)
data_spotreba <- select(moje_data, z1, z2, z3, z4, z6, z7, z9, z10, x9, a67, a1, a2, a4, a8, a74)
#právě jsem si vybrala jenom proměnné, které se mi hodí analyzovat (15 variables)
glimpse(data_spotreba)
skimr::skim(data_spotreba)
class(moje_data$a1)
věk <- factor("věk")
names(data_spotreba) = c("pohlaví", "věk", "vzdělání", "zaměstnání hlavy rodiny", "velikost domácnosti", "počet dětí nad 18 let", "měsiční příjem domácnosti", "velikost místa bydliště", "měsíční příjem na osobu v domácnosti", "příjmy naší rodiny rostou pomaleji než ceny potravin", "stravujete se celkově zdravěji", "omezujete kalorickou hodnotu stravy", "vybíráte si kvalitnější druhy potravin", "omezujete spotřebu tuku", "na jidle nešetřím, šetřím jinde")
view(data_spotreba)
pohlaví <- factor(pohlaví)
pohlaví <- factor(data_spotreba$pohlaví)
df = data_spotreba %>% mutate(across(everything(),  .fns = as_factor))
class(df$pohlaví)
glimpse()
glimpse(df)
df$pohlaví
df = data_spotreba %>% mutate(across(starts_with("v"),  .fns = as_factor))
glimpse(df)
df = data_spotreba %>% mutate(across(everything(),  .fns = as_factor))
glimpse(df)
df = data_spotreba %>% mutate(across(everything(),  .fns = as_factor, .names = paste0("X", 1:ncol(data_spotreba))))
df = data_spotreba %>% mutate(across(everything(),  .fns = as_factor, .names = paste0("X", 1:15)))
df = data_spotreba %>% mutate(across(everything(),  .fns = as_factor, .names = c(paste0("X", 1:15))))
df = data_spotreba %>% mutate(across(everything(),  .fns = as_factor, .names = "X")))
df = data_spotreba %>% mutate(across(everything(),  .fns = as_factor, .names = "X"))
glimpse(df)
df = data_spotreba %>% mutate(across(everything(),  .fns = as_factor))
glimpse(df)
class(df)
glm(family = "binomial")
glimpse(df)
glm(vzdělání ~ pohlaví, family = "binomial", data = df)
df$vzdělání
glm(`stravujete se celkově zdravěji` ~ pohlaví, family = "binomial", data = df)
r = glm(`stravujete se celkově zdravěji` ~ pohlaví, family = "binomial", data = df)
summary(r)
m1 = glm(`stravujete se celkově zdravěji` ~ pohlaví, family = "binomial", data = df)
m2 = glm(`stravujete se celkově zdravěji` ~ pohlaví + věk, family = "binomial", data = df)
summary(m2)
m3 = glm(`stravujete se celkově zdravěji` ~ pohlaví * věk, family = "binomial", data = df)
summary(m3)
m3 = glm(`stravujete se celkově zdravěji` ~ pohlaví * vzdělání, family = "binomial", data = df)
summary(m3)
m2 = glm(`stravujete se celkově zdravěji` ~ pohlaví + vzdělání, family = "binomial", data = df)
summary(m2)
m3 = glm(`stravujete se celkově zdravěji` ~ pohlaví * vzdělání, family = "binomial", data = df)
summary(m3)
summary(m2)
summary(m1)
summary(m2)
summary(m3)
names(data_spotreba) = c("pohlaví", "věk", "vzdělání", "zaměstnání hlavy rodiny", "velikost domácnosti", "počet dětí nad 18 let", "měsiční příjem domácnosti", "velikost místa bydliště", "měsíční příjem na osobu v domácnosti", "příjmy naší rodiny rostou pomaleji než ceny potravin", "CIL stravujete se celkově zdravěji", "CIL omezujete kalorickou hodnotu stravy", "CIL vybíráte si kvalitnější druhy potravin", "CIL omezujete spotřebu tuku", "CIL na jidle nešetřím, šetřím jinde")
df = data_spotreba %>% mutate(across(everything(),  .fns = as_factor)) %>%
mutate(across(starts_with("CIL "), .fns = as.character))
glimpse(df)
df$`CIL omezujete spotřebu tuku`
df = data_spotreba %>% mutate(across(everything(),  .fns = as_factor)) %>%
mutate(across(starts_with("CIL "), .fns = as.character))  %>%
mutate(across(starts_with("CIL "),
.fns =  ~recode(., `Nikdy 0%` = '0', `Vždy 100%` = '100',  # Frekvence narušení objektivity
`10%` = '10', `20%` = '20', `30%` = '30', `40%` = '40', `50%` = '50',
`60%` = '60', `70%` = '70', `80%` = '80', `90%` = '90',
`Pohled z vnějšku` = 'Ano', `Přesnost` = 'Ano',  `Matematická konzistence` = 'Ano',  # Objektivita
`Testovatelnost` = 'Ano', `Nestrannost` = 'Ano', `Přiblížení k pravdě` = 'Ano',
`Shoda s realitou` = 'Ano', `Kvantifikace` = 'Ano' )))
glimpse(df)
df = data_spotreba %>% mutate(across(everything(),  .fns = as_factor)) %>%
mutate(across(starts_with("CIL "), .fns = as.character))  %>%
mutate(across(starts_with("CIL "),
.fns =  ~recode(., ano = 1, ne = 0, nevi = NA )))
df = data_spotreba %>% mutate(across(everything(),  .fns = as_factor)) %>%
mutate(across(starts_with("CIL "), .fns = as.character))  %>%
mutate(across(starts_with("CIL "),
.fns =  ~recode(., ano = 1, ne = 0, nevi = 99 )))
glimpse(df)
df = data_spotreba %>% mutate(across(everything(),  .fns = as_factor)) %>%
mutate(across(starts_with("CIL "), .fns = as.character))  %>%
mutate(across(starts_with("CIL "),
.fns =  ~recode(., ano = 1, ne = 0, nevi = 99,
souhlasi = 1, nesouhlasi = 0, )))
glimpse(df)
df = data_spotreba %>% mutate(across(everything(),  .fns = as_factor)) %>%
mutate(across(starts_with("CIL "), .fns = as.character))  %>%
mutate(across(starts_with("CIL "),
.fns =  ~recode(., ano = 1, ne = 0, nevi = 99,
souhlasi = 1, nesouhlasi = 0)))
glimpse(df)
df = data_spotreba %>% mutate(across(everything(),  .fns = as_factor)) %>%
mutate(across(starts_with("CIL "), .fns = as.character))  %>%
mutate(across(starts_with("CIL "),
.fns =  ~recode(., ano = 1, ne = 0, nevi = -1,
souhlasi = 1, nesouhlasi = 0)))
glimpse(df)
df$`CIL omezujete spotřebu tuku`
names(data_spotreba) = c("pohlaví", "věk", "vzdělání", "zaměstnání hlavy rodiny", "velikost domácnosti", "počet dětí nad 18 let", "měsiční příjem domácnosti", "velikost místa bydliště", "měsíční příjem na osobu v domácnosti", "příjmy naší rodiny rostou pomaleji než ceny potravin", "CIL stravujete se celkově zdravěji", "CIL omezujete kalorickou hodnotu stravy", "CIL vybíráte si kvalitnější druhy potravin", "CIL omezujete spotřebu tuku", "CIL na jidle nešetřím, šetřím jinde")
df = data_spotreba %>% mutate(across(everything(),  .fns = as_factor)) %>%
mutate(across(starts_with("CIL "), .fns = as.character))  %>%
mutate(across(starts_with("CIL "),
.fns =  ~recode(., ano = 1, ne = 0, nevi = -1,
souhlasi = 1, nesouhlasi = 0)))
glimpse(df)
names(df) = c("pohlaví", "věk", "vzdělání", "zaměstnání hlavy rodiny", "velikost domácnosti", "počet dětí nad 18 let", "měsiční příjem domácnosti", "velikost místa bydliště", "měsíční příjem na osobu v domácnosti", "příjmy naší rodiny rostou pomaleji než ceny potravin", "CIL stravujete se celkově zdravěji", "omezujete kalorickou hodnotu stravy", "vybíráte si kvalitnější druhy potravin", "omezujete spotřebu tuku", "na jidle nešetřím, šetřím jinde")
m1 = glm(`stravujete se celkově zdravěji` ~ pohlaví, family = "binomial",
data = (df %>% filter(`stravujete se celkově zdravěji`> -1)))
m1 = glm(`stravujete se celkově zdravěji` ~ pohlaví, family = "binomial",
data = (df %>% filter(`stravujete se celkově zdravěji`> -1)))
df
df
names(data_spotreba) = c("pohlaví", "věk", "vzdělání", "zaměstnání hlavy rodiny", "velikost domácnosti", "počet dětí nad 18 let", "měsiční příjem domácnosti", "velikost místa bydliště", "měsíční příjem na osobu v domácnosti", "příjmy naší rodiny rostou pomaleji než ceny potravin", "CIL stravujete se celkově zdravěji", "CIL omezujete kalorickou hodnotu stravy", "CIL vybíráte si kvalitnější druhy potravin", "CIL omezujete spotřebu tuku", "CIL na jidle nešetřím, šetřím jinde")
view(data_spotreba)
df = data_spotreba %>% mutate(across(everything(),  .fns = as_factor)) %>%
mutate(across(starts_with("CIL "), .fns = as.character))  %>%
mutate(across(starts_with("CIL "),
.fns =  ~recode(., ano = 1, ne = 0, nevi = -1,
souhlasi = 1, nesouhlasi = 0)))
df$`CIL omezujete spotřebu tuku`
df$`CIL omezujete spotřebu tuku`
names(df) = c("pohlaví", "věk", "vzdělání", "zaměstnání hlavy rodiny", "velikost domácnosti", "počet dětí nad 18 let", "měsiční příjem domácnosti", "velikost místa bydliště", "měsíční příjem na osobu v domácnosti", "příjmy naší rodiny rostou pomaleji než ceny potravin", "CIL stravujete se celkově zdravěji", "omezujete kalorickou hodnotu stravy", "vybíráte si kvalitnější druhy potravin", "omezujete spotřebu tuku", "na jidle nešetřím, šetřím jinde")
names(df) = c("pohlaví", "věk", "vzdělání", "zaměstnání hlavy rodiny", "velikost domácnosti", "počet dětí nad 18 let", "měsiční příjem domácnosti", "velikost místa bydliště", "měsíční příjem na osobu v domácnosti", "příjmy naší rodiny rostou pomaleji než ceny potravin", "CIL stravujete se celkově zdravěji", "omezujete kalorickou hodnotu stravy", "vybíráte si kvalitnější druhy potravin", "omezujete spotřebu tuku", "na jidle nešetřím, šetřím jinde")
glimpse(df)
names(df) = c("pohlaví", "věk", "vzdělání", "zaměstnání hlavy rodiny", "velikost domácnosti", "počet dětí nad 18 let", "měsiční příjem domácnosti", "velikost místa bydliště", "měsíční příjem na osobu v domácnosti", "příjmy naší rodiny rostou pomaleji než ceny potravin", "stravujete se celkově zdravěji", "omezujete kalorickou hodnotu stravy", "vybíráte si kvalitnější druhy potravin", "omezujete spotřebu tuku", "na jidle nešetřím, šetřím jinde")
glimpse(df)
m1 = glm(`stravujete se celkově zdravěji` ~ pohlaví, family = "binomial",
data = (df %>% filter(`stravujete se celkově zdravěji`> -1)))
summary(m1)
summary(m2)
m1 = glm(`stravujete se celkově zdravěji` ~ pohlaví, family = "binomial",
data = (df %>% filter(`stravujete se celkově zdravěji`> -1)))
summary(m1)
summary(m2)
m2 = glm(`stravujete se celkově zdravěji` ~ pohlaví + vzdělání, family = "binomial",
data = (df %>% filter(`stravujete se celkově zdravěji`> -1)))
summary(m2)
m3 = glm(`stravujete se celkově zdravěji` ~ pohlaví * vzdělání, family = "binomial",
data = (df %>% filter(`stravujete se celkově zdravěji`> -1)))
summary(m3)
m1 = glm(`stravujete se celkově zdravěji` ~ pohlaví, family = "binomial",
data = (df %>% filter(`stravujete se celkově zdravěji`> -1)))
summary(m1)
summary(m2)
summary(m2)
m3 = glm(`stravujete se celkově zdravěji` ~ pohlaví * vzdělání, family = "binomial",
data = (df %>% filter(`stravujete se celkově zdravěji`> -1)))
summary(m3)
df$věk
view(df)
df = data_spotreba %>% mutate(across(everything(),  .fns = as.factor)) %>%
mutate(across(starts_with("CIL "), .fns = as.character))  %>%
mutate(across(starts_with("CIL "),
.fns =  ~recode(., ano = 1, ne = 0, nevi = -1,
souhlasi = 1, nesouhlasi = 0)))
names(data_spotreba) = c("pohlaví", "věk", "vzdělání", "zaměstnání hlavy rodiny", "velikost domácnosti", "počet dětí nad 18 let", "měsiční příjem domácnosti", "velikost místa bydliště", "měsíční příjem na osobu v domácnosti", "příjmy naší rodiny rostou pomaleji než ceny potravin", "CIL stravujete se celkově zdravěji", "CIL omezujete kalorickou hodnotu stravy", "CIL vybíráte si kvalitnější druhy potravin", "CIL omezujete spotřebu tuku", "CIL na jidle nešetřím, šetřím jinde")
df = data_spotreba %>% mutate(across(everything(),  .fns = as.factor)) %>%
mutate(across(starts_with("CIL "), .fns = as.character))  %>%
mutate(across(starts_with("CIL "),
.fns =  ~recode(., ano = 1, ne = 0, nevi = -1,
souhlasi = 1, nesouhlasi = 0)))
df$`CIL omezujete spotřebu tuku`
df$`CIL omezujete spotřebu tuku`
names(df) = c("pohlaví", "věk", "vzdělání", "zaměstnání hlavy rodiny", "velikost domácnosti", "počet dětí nad 18 let", "měsiční příjem domácnosti", "velikost místa bydliště", "měsíční příjem na osobu v domácnosti", "příjmy naší rodiny rostou pomaleji než ceny potravin", "stravujete se celkově zdravěji", "omezujete kalorickou hodnotu stravy", "vybíráte si kvalitnější druhy potravin", "omezujete spotřebu tuku", "na jidle nešetřím, šetřím jinde")
df = data_spotreba %>% mutate(across(everything(),  .fns = as.character))
view(df)
names(data_spotreba) = c("pohlaví", "věk", "vzdělání", "zaměstnání hlavy rodiny", "velikost domácnosti", "počet dětí nad 18 let", "měsiční příjem domácnosti", "velikost místa bydliště", "měsíční příjem na osobu v domácnosti", "příjmy naší rodiny rostou pomaleji než ceny potravin", "CIL stravujete se celkově zdravěji", "CIL omezujete kalorickou hodnotu stravy", "CIL vybíráte si kvalitnější druhy potravin", "CIL omezujete spotřebu tuku", "CIL na jidle nešetřím, šetřím jinde")
view(data_spotreba)
df = data_spotreba %>% mutate(across(everything(),  .fns = as_factor)) %>%
mutate(across(starts_with("CIL "), .fns = as.character))  %>%
mutate(across(starts_with("CIL "),
.fns =  ~recode(., ano = 1, ne = 0, nevi = -1,
souhlasi = 1, nesouhlasi = 0)))
names(df) = c("pohlaví", "věk", "vzdělání", "zaměstnání hlavy rodiny", "velikost domácnosti", "počet dětí nad 18 let", "měsiční příjem domácnosti", "velikost místa bydliště", "měsíční příjem na osobu v domácnosti", "příjmy naší rodiny rostou pomaleji než ceny potravin", "stravujete se celkově zdravěji", "omezujete kalorickou hodnotu stravy", "vybíráte si kvalitnější druhy potravin", "omezujete spotřebu tuku", "na jidle nešetřím, šetřím jinde")
glimpse(df)
## Najdeme názvy souborů
archive = "CSDA00057 (3).zip"
files = unzip(archive, list = T) %>% filter(Length > 0)
View(files)
## Samotné načtení
moje_data = unz(archive, files$Name[1]) %>% read_sav()
md = read_dta("CSDA00036_F1[1].dta")
md = read_dta("CSDA00036_F1[1].dta")
library(foreign)
md = read.dta("CSDA00036_F1[1].dta")
md = read_dta("CSDA00036_F1[1].dta")
md = read_stata("CSDA00036_F1[1].dta")
exp(0.7)
log(2)
log(0.5)
log(3)
exp(0.85)
exp(0.15)
exp(0.13)
exp(0.72)
exp(0.85)
exp(0.13) * exp(0.72)
m4 = glm(`stravujete se celkově zdravěji` ~ pohlaví + vzdělání + `měsíční příjem na osobu v domácnosti`,
family = "binomial",
data = (df %>% filter(`stravujete se celkově zdravěji`> -1)))
summary(m4)
m4 = glm(`stravujete se celkově zdravěji` ~ pohlaví + vzdělání + `počet dětí nad 18 let`,
family = "binomial",
data = (df %>% filter(`stravujete se celkově zdravěji`> -1)))
summary(m4)
m4 = glm(`stravujete se celkově zdravěji` ~ pohlaví + vzdělání + `velikost domácnosti`,
family = "binomial",
data = (df %>% filter(`stravujete se celkově zdravěji`> -1)))
summary(m4)
m4 = glm(`stravujete se celkově zdravěji` ~ pohlaví + vzdělání +
C(`velikost domácnosti`, contr.treatment(8, base=2)),
family = "binomial",
data = (df %>% filter(`stravujete se celkově zdravěji`> -1)))
summary(m4)
m4 = glm(`stravujete se celkově zdravěji` ~ pohlaví + vzdělání + `velikost domácnosti`,
family = "binomial",
data = (df %>% filter(`stravujete se celkově zdravěji`> -1)
)
C()
m4 = glm(`stravujete se celkově zdravěji` ~ pohlaví + vzdělání + `velikost domácnosti`,
family = "binomial",
data = (df %>% filter(`stravujete se celkově zdravěji`> -1)
))
summary(m4)
m4 = glm(`stravujete se celkově zdravěji` ~ pohlaví + vzdělání + `velikost domácnosti`,
family = "binomial",
data = (df %>% filter(`stravujete se celkově zdravěji`> -1) %>%
relevel(`velikost domácnosti`, ref = 2)))
m4 = glm(`stravujete se celkově zdravěji` ~ pohlaví + vzdělání + `velikost domácnosti`,
family = "binomial",
data = (df %>% filter(`stravujete se celkově zdravěji`> -1) %>%
fct_relevel(`velikost domácnosti`, ref = 2)))
m4 = glm(`stravujete se celkově zdravěji` ~ pohlaví + vzdělání + `velikost domácnosti`,
family = "binomial",
data = (df %>% filter(`stravujete se celkově zdravěji`> -1) %>%
mutate(`velikost domácnosti` = relevel(`velikost domácnosti`, ref = 2))))
summary(m4)
GET('http://207.154.245.100/pgg/monitor/data/*',  ## Adresa naší hry
write_disk('aktualniData.zip', overwrite = TRUE))
archive = "aktualniData.zip"
files = unzip(archive, list = T) %>%
filter(Length > 0)
files
GET('http://207.154.245.100/pgg/monitor/data/*',  ## Adresa naší hry
write_disk('aktualniData.zip', overwrite = TRUE))
## Package
library(dplyr)
library(readr)
library(stringr)
library(httr)
GET('http://207.154.245.100/pgg/monitor/data/*',  ## Adresa naší hry
write_disk('aktualniData.zip', overwrite = TRUE))
archive = "aktualniData.zip"
files = unzip(archive, list = T) %>%
filter(Length > 0)
files
